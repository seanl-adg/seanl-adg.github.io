<!doctype html>
<html>
    <head>
        <script>
            window.onload = () => {
                if (typeof GM_getValue === 'undefined') {
                    document.body.innerHTML = "<p>Install the <a href='./userscript.js'>userscript</a></p>"
                }

                document.body.innerHTML = GM_getValue('testKey');
                GM_setValue('testKey', Math.random());
            }

            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('./sw.js')
                    .then(function(registration) {
                        console.log('Service worker registration succeeded:', registration);
                    }).catch(function(error) {
                        console.log('Service worker registration failed:', error);
                    });
            } else {
                console.log('Service worker not supported');
            }
        </script>
    </head>
    <body>
                
    </body>
</html>